-- [beforeClass]
DROP TABLE IF EXISTS EQL_DESC;
CREATE TABLE EQL_DESC (CODE VARCHAR(10), NAME VARCHAR(10))
  ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 ROW_FORMAT=COMPACT;
INSERT INTO EQL_DESC VALUES('1', 'AA');
INSERT INTO EQL_DESC VALUES('2', 'BB');
INSERT INTO EQL_DESC VALUES('3', 'CC');
INSERT INTO EQL_DESC VALUES('4', 'DD');

DROP TABLE IF EXISTS EQL_DICT;
CREATE TABLE EQL_DICT (TABLE_NAME VARCHAR(10), CATE VARCHAR(10), CODE VARCHAR(10), NAME VARCHAR(10))
  ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 ROW_FORMAT=COMPACT;
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '1', '进行中');
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '2', '已完成');
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '3', '已失败');
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '_', '未识别');

-- [updatexx]
DELETE FROM EQL_DICT;
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '1', '进行中xx');
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '2', '已完成xx');
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '3', '已失败xx');
INSERT INTO EQL_DICT VALUES('TTT', 'TEST', '_', '未识别xx');

-- global settings desc.code1=decode(1,处理中,2,处理完毕,3,处理失败,未知)
-- global settings desc.code2=mapping(@org.n3r.eql.impl.CodeDescTest$CustomMapping)

-- [meaning]
SELECT CODE, NAME
FROM EQL_DICT
WHERE CATE = '##';

-- [meaning2]
SELECT CODE, NAME
FROM EQL_DICT
WHERE CATE = '##'
AND TABLE_NAME = '##';

-- [test01 desc=NAME@code1]
SELECT CODE, 0 AS NAME
FROM EQL_DESC;

-- [test02 desc=NAME@meaning(TEST)]
SELECT CODE, 0 AS NAME
FROM EQL_DESC;


-- [test1 desc="NAME@code1,MEANING@meaning(TEST)"]
SELECT CODE, 1 AS NAME, CODE, 2 AS MEANING
FROM EQL_DESC;

-- [test2 desc="NAME@code2, MEANING@meaning2(TEST, TTT)"]
SELECT CODE, 1 AS NAME, CODE, 2 AS MEANING
FROM EQL_DESC;